## heroku config:get HEROKU_POSTGRESQL_RED_URL -a animales-felices-prod

client_names = [
  {name: "Carlos Galarza", phone: "0986434392"},
  {name: "Sara Avesillas", phone: "0969629027"},
  {name: "Mateo Mendoza", phone: "0985980803"},
  {name: "Thiago", phone: "0985239628"},
  {name: "Pablo Olguin", phone: "0969065301"},
  {name: "Natalia Marallo", phone: "0996738746"},
  {name: "María Cristina", phone: "0997497562"},
  {name: "Solange Zambrano", phone: "0969934328"},
  {name: "Paula Navarrete"},
  {name: "Sofía Calderon", phone: "0995076838"},
  {name: "Diego Balcazar", phone: "0997378262"},
  {name: "Mario", phone: "0994372223"},
  {name: "Sergio Espinoza", phone: "0992167008"},
  {name: "Katty Quiroz", phone: "0996713251"},
  {name: "Juan Carlos", phone: "0994450629"},
  {name: "Leo Balarezo", phone: "0986110538"},
  {name: "David Lopez", phone: "0978847404"},
  {name: "Andres", phone: "0988195495"},
  {name: "Mariana", phone: "0979924413"},
  {name: "Lenny Tenesaca", phone: "0986525454"},
  {name: "Javier Mendoza", phone: "0992256898"},
  {name: "Ma. Fernanda Bohorquez", phone: "0986951123"},
  {name: "Carlos Pastor", phone: "0994362593"},
  {name: "Cesar Tapia", phone: "0979802929"},
  {name: "Raul Marchan", phone: "2935684"},
  {name: "Sra de Román", phone: "2935593"},
  {name: "Melida Coronel", phone: "0993964553"},
  {name: "Marcos Asqui"},
  {name: "Abigail Lascano", phone: "0986757313"},
  {name: "Dra Ariana"},
  {name: "Anggie Barco", phone: "0992280754"},
  {name: "Alejandro Sanmartin", phone: "0985882380"},
  {name: "Wendy Lopez", phone: "0967874069"},
  {name: "Anggie Barco", phone: "0992280754"},
  {name: "Kempis Briones", phone: "0967879522"},
  {name: "Fernando Balcazar", phone: "0996242658"},
  {name: "Anahi Gerrero", phone: "0967848921"},
  {name: "Alejandra Fernandez", phone: "0992278458"},
  {name: "Angie Zamora", phone: "0999138683"},
  {name: "Marta Navarro", phone: "0994209481"},
  {name: "Gregorio", phone: "0985551426"},
  {name: "Xavier Sanchez", phone: "0978889372"},
  {name: "Jose Vera", phone: "0980438731"},
  {name: "Johana", phone: "0995397293"},
  {name: "Pilar", phone: "0988755693"},
  {name: "Romina", phone: "0988764448"},
  {name: "Aldo Torres", phone: "0989150983"},
  {name: "Karla Tarira"},
  {name: "Gabriela Solorzano", phone: "0987849549"},
  {name: "Xiomara Sanchez", phone: "0981954366"},
  {name: "Mercedes Suárez", phone: "0939161591"},
  {name: "Javier Molina", phone: "0993305717"},
  {name: "Pedro Gong", phone: "0997381693"},
  {name: "Rita Muñoz", phone: "0992289372"},
  {name: "Peter Villamar", phone: "0990145121"},
  {name: "Dario Aviles", phone: "3082520"},
  {name: "Patricia Holguin", phone: "0981239986"},
  {name: "Jose Zamora", phone: "0967779925"},
  {name: "Sin nombre", phone: "0939737488"},
  {name: "Juan Carlos Andrade", phone: "0994194696"},
  {name: "Hellen Pacheco", phone: "2937292"},
  {name: "Carlos Castillo", phone: "0994463200"},
  {name: "Maria Mejia", phone: "0958823180"},
  {name: "Patricia Morales", phone: "0999134049"},
  {name: "Katty Sanchez", phone: "0993925386"},
  {name: "Jean Carlos Lino", phone: "0993925386"},
  {name: "Melanie Espinel", phone: "2177816"},
  {name: "Ericka Chevasco", phone: "0992272185"},
  {name: "Mariana Borja", phone: "0984194496"},
  {name: "Joselyn Gonzalez", phone: "0988058057"},
  {name: "Jazmin Rivas", phone: "0994177261"},
  {name: "July Barrios", phone: "0995594574"},
  {name: "Katherine Cordova"},
  {name: "Luz Maria Garcia", phone: "2937062"},
  {name: "Lcdo Jaramillo", phone: "0986086541"},
  {name: "Jose Flores", phone: "0980678160"},
  {name: "Raul Toala", phone: "0987257524"},
  {name: "Denis Luna", phone: "0996602480"},
  {name: "Lcdo Jaramillo", phone: "2937384"},
  {name: "Martha Villamicancia", phone: "0939973426"},
  {name: "Nicol Lamas", phone: "0987765457"},
  {name: "Maritza Villamar", phone: "0988664492"},
  {name: "Mari Moran", phone: "0996963309"},
  {name: "Andres Medina", phone: "0999478538"},
  {name: "Nathaly Marallo", phone: "0999581763"},
  {name: "Alexis Silva", phone: "0980847076"},
  {name: "Maylin Martinez", phone: "0986621275"},
  {name: "Christian Román", phone: "0991141239"},
  {name: "Marcelo Balcazar", phone: "0991042028"},
  {name: "Alexandra Ramirez", phone: "0994449111"},
  {name: "Andrea Garzon", phone: "0984808961"},
  {name: "Lidia Quimiz"},
  {name: "Robert Anchundia", phone: "0969375383"},
  {name: "Gabriela Sanchez", phone: "0992652080"},
  {name: "Roxana Ayala", phone: "0939256474"},
  {name: "Ronal Suarez", phone: "0985572466"},
  {name: "Maria Fernanda Flores", phone: "0992052569"},
  {name: "Johana Lopez", phone: "0985708122"},
  {name: "Ma. Eugenia Lopez", phone: "0998079811"},
  {name: "Nancy", phone: "0999611465"},
  {name: "Juan Jimenez", phone: "2938927"},
  {name: "Maritza Rodriguez", phone: "0958806912"},
  {name: "Sra Solari", phone: "0993516397"},
  {name: "Juan Espinoza", phone: "0979030098"},
  {name: "Pilar Canales", phone: "2938261"},
  {name: "Juan Jose Alava", phone: "0969014978"},
  {name: "Gina Moran", phone: "0997115647"},
  {name: "Denisse Cusme", phone: "0996479215"},
  {name: "Diana", phone: "0999091211"},
  {name: "Dr Orlando", phone: "0958872931"},
  {name: "Dra Patricia", phone: "0985759787"},
  {name: "Edgar Vera", phone: "0982328535"},
  {name: "Evelin Cuadrado", phone: "0997780100"},
  {name: "Hellen", phone: "0980404026"},
  {name: "Isabel", phone: "0994273683"},
  {name: "Joel Ortiz", phone: "0981675280"},
  {name: "Maribel", phone: "0986461496"},
  {name: "Matias", phone: "0986076030"},
  {name: "Monica", phone: "2935463"},
  {name: "Pamela", phone: "0969328330"},
  {name: "Ruben", phone: "0988088952"},
  {name: "Segundo Pinto", phone: "0961470130"},
  {name: "Sra Bolivia", phone: "0997321984"},
  {name: "Vanessa", phone: "0959449413"},
  {name: "Ximena Quiroga", phone: "0983745103"},
  {name: "Yulexi Alcivar", phone: "0969701700"},
  {name: "Don Carlos", phone: "0981422241"},
  {name: "Elvis Moran", phone: "0959954686"},
  {name: "Karina Pardo", phone: "0990049505"},
  {name: "Kenny Vivero", phone: "0996175750"},
  {name: "Luis Plaza", phone: "0995162815"},
  {name: "Maria Victoria", phone: "0987918794"},
  {name: "Patricia Ramos", phone: "0982784370"},
  {name: "Rosa", phone: "0994422080"},
  {name: "Yessica Loarte", phone: "0979611834"},
  {name: "Felipe", phone: "0983131356"},
  {name: "Don Carlos", phone: "0981422241"},
  {name: "Cristina", phone: "0990821250"},
  {name: "Ericka", phone: "0981831525"},
  {name: "Isaura", phone: "0999429109"},
  {name: "Luis", phone: "0995162815"},
  {name: "Maria Elena", phone: "0987195279"},
  {name: "Moises", phone: "0960691792"},
  {name: "Fernando Moreno", phone: "0939300790"},
  {name: "Samantha", phone: "0996361820"},
  {name: "Sra Carmen", phone: "0994422080"},
  {name: "Melisa", phone: "0967965153"},
  {name: "Antonella", phone: "0969801641"},
]

task :seed_bach_appoinments, [:month] => :environment do |t, args|
  peluqueria_normal = Service.find_by(name: 'Peluquería (baño normal)')
  peluqueria_medicado = Service.find_by(name: 'Peluquería (baño medicado)')

  services = [peluqueria_normal, peluqueria_medicado]

  mafer = Specialist.find_by(name: 'Maria Fernanada')


  ######
  service_size = services.size

  # start_date = Date.new(2018, 12, 1)
  # end_date = Date.new(2018, 12, 31)
  month = args[:month].to_i
  start_date = Date.new(2019, month, 1)
  end_date = start_date.end_of_month

  current_clients = client_names.sample(rand(40..54))

  if month >= 6
    end_date = Date.new(2019, month, 19)
    current_clients = client_names.sample(rand(25..40))
  end

  # # my_days = [1,2,3,4,5,6]
  # # dates = (start_date..end_date).to_a.select {|k| my_days.include?(k.wday)}

  hours = (9..13).to_a
  minutes_for_service = {}
  services.each do |s|
    minutes_for_service[s.id] = (0..60).step(s.duration_min).to_a
    minutes_for_service[s.id].pop
  end  

  # # t.change({ hour: 16 })

  current_clients.each do |client|
    service = services[Random.rand(service_size)]
    start_time = FFaker::Time.between(start_date, end_date)
    start_time = start_time.change({
      hour: hours.sample,
      min: minutes_for_service[service.id].sample
    })
    # puts client
    created_at = start_time - rand(1800..7200)
    appointment = Appointment.new({
      service_id: service.id,
      specialist_id: mafer.id,
      client_name: client[:name],
      client_phone: client[:phone],
      start_time: start_time,
      end_time: start_time + (service.duration_min).minutes,
      created_at: created_at,
      updated_at: created_at,
      ## remark: "- __Mascota__: Sasha\n- __Especie__: Canina\n- __Raza__: Shitzu\n- __Sexo__: Macho\n- __Color__: Negro"
    })

    if appointment.valid?
      appointment.save
    else
      p appointment.errors
    end
  end
end